---
layout: post
title: "从零开始学vim：基础篇"
description: ""
tags: []
---
{% include JB/setup %}

###vim是啥

[vim][1]是一个（有模式的）跨平台文本编辑器。

###和记事本的区别

先看几个例子，括号中是在vim里完成该任务所需的按键次数，可以同时考虑一下在记事本中做同样的事情所需的按键次数：

 - 删除当前光标位置单词：`diw`（3次按键，`d`= 删除）
 - 删除当前位置到行尾：`d$`（2次按键，`$`= 行尾）
 - 拷贝当前光标所在括号中的内容：`yi(`（3次按键，`y`= 拷贝，`i(` = 当前括号中的内容）
 - 替换当前光标位置单词：`ciw`（3次按键，`c`= 替换，`iw`= 当前光标指向的单词）
 - 跳转到当前页中任意单词位置（插件easymotion）：\w（3-4次按键，输入\w后easymotion会将当前编辑页面中所有单词位置变成快捷键，再按键一到两次即可跳转）

不太好理解？接着往下看，总之vim如果用熟了可以像飞一样快。Now let\'s begin!

<!--more-->

###vim 101

首先，跟一般文本编辑器不同，vim是有模式的，两个最基本的模式是**编辑模式**以及**命令模式**。在编辑模式下vim＝记事本，在命令模式下可以通过各种命令来控制光标的位置，或者实现各种其他功能，这种多模式操作是vim强大的原因之一。

打开vim后，默认进入的是命令模式，此时所有按键都会被看作是给vim的命令，而非内容输入，比如说可以通过以下几个键移动光标的位置：

 - `j` 下移
 - `k` 上移
 - `h` 左移
 - `l` 右移

Feeling it？现在右手再也不用去找箭头键了！想输入点内容？

- `i` (insert) 在当前光标位置开始插入
- `o` (open) 在当前光标位置下方新开一行并开始插入
- `a` (append) 从当前光标位置之后开始插入

这些命令会将vim切换到编辑模式，这时候vim就是一个记事本，可以输入删除什么的，当然也可以用箭头键到处移动光标（NEVER do that）。编辑完成后按ESC就可以再次切回命令模式。因此vim的基本工作流程就是：命令模式下跳转光标，切换到编辑模式编辑内容，按ESC切回命令模式。整个过程（除了按ESC键）以外两只手都不应该离开默认的键盘位置。

再来几个切换编辑模式的常用指令，觉得太多可以先跳过：

- `I` 从行首开始插入
- `O` 在当前光标位置下方新开一行，但是停留在当前位置开始插入
- `A` 从行尾开始插入

现在编辑完了，如何保存？这里要用到vim的另一个模式，在命令模式下输入`:`，然后你随后的输入就会出现在vim窗口的左下角，这里可以当成是vim内部的控制台，用于输入一些与文本编辑不是太直接相关的指令（也可以认为是需要看得见已经输入了什么才比较方便的指令，普通指令的按键是看不见的），例如保存文件`:w`，退出vim`:q`等等，下面同样给出常用指令列表：

 - `:q`（quit）退出
 - `:w`（write）保存
 - `:e 文件路径`（edit）编辑文件，可以是已有文件，也可以新建文件
 - `sav 文件路径`（saveas）另存为

另外，在指令后面加`!`可以强制执行，比如你编辑了当前文件但是不想保存而想直接退出，则需执行`q!`强行退出；还有一点是某些指令是可以连在一起执行的，比如`wq`表示保存然后退出。

###vim进阶：如何“说”vim？

如果说vim仅仅有这些指令，那其实也就一般般记事本多了几个快捷键的程度，vim真正的强大之处在与它是个你可以“说”的语言。这个语言由两部分组成：**单词**，以及将这些单词组合起来表示复杂意思的**语法**。vim中的单词虽然很多，但是有比较明确的归类，下面会详细说明。这里先看vim的语法（非常intuitive），以下是最常用的两个：

 - ［重复次数］动词（verbs）\[修订符（modifier）] 对象（objects）
 - ［重复次数］动词（verbs）动作（motions）

举个例子，比如说你已经知道了**删除`d`**这个**动词**，你也知道了**光标移动至下一个单词`w`**这个**动作**，那么想要删除光标当前位置与下一个单词之间的内容，用vim说就是`dw`，搞定，如果想要重复这个动作5次，ok，那就是`5dw`。到这里再回头看开始的那些例子就能明白到底发生了什么了。

下面来分类认识一下vim的指令（这里仅仅列出最常用的，更多指令请参考[vim commands cheat sheet][2]）：

- 动词（verbs）：
 - `v`（visual）选中
 - `c`（change）修改
 - `d`（delete）删除
 - `y`（yank）拷贝
 - `x`（cut）剪切
- 动作（motions）
 - `hjkl` 移动光标 
 - `w`（word）下一单词开头
 - `b`（before）前一单词开头
 - `e`（end）当前单词结尾
 - `$` 行尾
 - `^` 行首
- 对象（objects）
 - `w`（word）单词
 - `s`（sentence）句子
 - `p`（paragraph）段落
 - `i`（inside）内部
 - `a`（around）包括
 - `t`（till）当前光标直到某个字母，例如ta表示当前光标向后直到第一次遇到字母a
 - `f`（find）与till相同，但是包含找到的字母
 - `/` 查找字符串，例如/foo从当前光标往后直到遇到字符串foo

另外vim的动词有个常用的快捷技巧，连续按两次往往意味着对当前行进行操作，例如`dd`是删除当前行，`yy`是拷贝当前行等等。

最后说一下vim的帮助系统，和linux的man类似，vim的帮助命令为`:help`，想查什么直接`:help 命令`就ok，甚至可以`:help motion`来查找所有的vim文档中关于motion这个概念的说明。在help中有很多超链接（跳转点）可以方便的在文档的不同部分进行跳转（链接用不同颜色表示），进入链接的方法是将光标移动到连接上，然后`ctrl+]`就会跳转到链接位置，想跳转回去可以`ctrl+o`。

推荐一个linux命令行下用于练习的vim新手工具，大部分linux系统应该自带，其他环境下装了vim后也应该可以使用：[vimtutor][3] 

[1]: http://www.vim.org/
[2]: http://www.fprintf.net/vimCheatSheet.html
[3]: http://linuxcommand.org/man_pages/vimtutor1.html
